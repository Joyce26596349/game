```cpp
#include <iostream>
#include <string>
#include <cstdlib>
#include <ctime>
using namespace std;
string ab(string ans,string guess){//?A?B函式
    int A = 0, B = 0;
    string c = "";
    for (int i = 0; i < 4; i++){
        if (ans[i] == guess[i]){//位置對、數字對
            A += 1;//A+=1
        }
        else{
            for (int j = 0; j < 4; j++){//其他位置中有答案的數字
                if (ans[i] == guess[j]){
                    B += 1;//B+=1
                }
            }
        }
    }
    if (A == 4){
        return "你贏了";
    }
    c += to_string(A);//?A轉字串
    c += "A";
    c += to_string(B);//?B轉字串
    c += "B";
    return c;//回傳?A?B
}
int main() {
    while (true){
        cout << "輸入不重複的四位數(第一位不為0)\n位置對且數字對的數為A，只有數字對的為B \n 猜數字， \n 輸入1111下一輪，輸入0000結束" << endl;
        string ans = "", s;
        int num[10];
        for (int i = 0; i < 10; i++){
            num[i] = i;
        }
        srand(time(NULL));
        while (ans.length() < 4){
            int x = rand() % 9+1;
            if (x == 0 && ans.length() == 0){
                    continue;
            }
            for (int i = 0; i < 10; i++){
                if (num[i] == x){
                    ans += to_string(x);
                    num[i] = -1;
                }
            }
        }
        cin>>s;
        int count = 0;
        while (true){
            cout<<ab(ans,s)<<endl;
            if (s == "1111"){
                cout << "下一輪" << endl;
                break;
            }
            if (s == "0000"){
                cout << "遊戲結束" << endl;
                return 0;
            }
            if (ab(ans,s) == "你贏了"){
                cout << endl;
                break;
            }
            cin>>s;
            while (s.length() != 4){
                cout << "非四位數" << endl;
                cin >> s;
            }
            if (s == "1111"){
                cout << "下一輪" << endl;
                break;
            }
            if (s == "0000"){
                cout << "遊戲結束" << endl;
                return 0;
            }
            count += 1;
        }
        cout << "答案是:" << ans << endl;
        cout << "你猜了" << count + 1 << "次" << endl;
    }
}
```
